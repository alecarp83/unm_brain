!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="54d0e6b2-1cf2-4e7c-9523-3cfd1fdf255b",e._sentryDebugIdIdentifier="sentry-dbid-54d0e6b2-1cf2-4e7c-9523-3cfd1fdf255b")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[691],{44843:function(e,t,l){Promise.resolve().then(l.bind(l,53551)),Promise.resolve().then(l.bind(l,61153))},53551:function(e,t,l){"use strict";l.d(t,{SidebarView:function(){return eh}});var a=l(37821),r=l(58078),s=l(75380),n=l(59264),i=l(27624),c=l(25260),d=l(39565),o=l(26262),u=l(35764),x=l(78781),m=l(84578),g=l.n(m),h=l(14233),f=l(90168),b=l(74703),p=l(64722),v=l(17344),k=l(61153),j=l(12306),y=l(60665),N=l(57893),w=l(82125),C=l(32159),D=l(51146),_=l(53644),Z=l(80389),T=l(11696);function E(e,t){return(0,T.l)(l=>{"public"===e.visibility?l.pathname=I(e,t):l.pathname="/c/".concat(e.site_id),l.searchParams.set("b",e.id)})}function I(e,t){let l="/@".concat(t,"/").concat(e.slug);return"profile"===e.slug&&(l="/@".concat(t)),l}var P=l(77391);function S(e,t){return t=t.replace(/-$/g,""),(e.slice(0,50-t.length)+t).replace(/--+/g,"-")}var R=l(17363);let L=_.z.object({id:_.z.string(),title:_.z.string().min(1)}).and(_.z.object({visibility:_.z.literal("private").optional().default("private")}).or(_.z.object({visibility:_.z.literal("public"),slug:_.z.string().min(3).max(50).regex(/^[a-zA-Z0-9-]+$/,"Invalid slug")})));function z(e){null==e||e.dispatchEvent(new SubmitEvent("submit",{cancelable:!0,bubbles:!0}))}let F=e=>{let{className:t="",...l}=e;return(0,a.jsx)("label",{className:"text-sm font-semibold block mb-1 dark:text-neutral-100 ".concat(t),...l})},M=e=>{let{className:t="",...l}=e;return(0,a.jsx)("div",{className:"flex flex-col gap-1 ".concat(t),...l})},O=e=>{let{className:t,...l}=e;return(0,a.jsx)("input",{className:"\n        border border-gray-200 dark:border-neutral-700 rounded-md\n        dark:bg-neutral-800 dark:text-white\n        px-2 w-full text-sm\n        h-8\n        aria-invalid:border-red-500\n        ".concat(t,"\n      "),...l})},Y=function(e){var t;let{className:l,bookmark:n,username:c,formRef:o,formElementRef:u}=e,{data:m}=(0,R.S7)(),g=(0,r.useMemo)(()=>m||[],[m]),f=(0,i.Wo)(),b=(0,i.Iq)(),p=n.site_id===b,v=(0,R.CQ)(),[k,_]=(0,j.cI)({onValidate(e){let{formData:t}=e;return(0,N.P)(t,{schema:L})},defaultValue:n,shouldValidate:"onInput",onSubmit(e,t){let{formData:l}=t;e.preventDefault();let a=L.parse(Object.fromEntries(l.entries()));v.mutateAsync({...a,id:n.id})}});k&&(o.current=k);let T=(0,r.useMemo)(()=>(function(e,t){let l=e.title.toLowerCase().replace(/[^a-z0-9-]/g,"-").replace(/--+/g,"-").replace(/^-|-$/g,"").slice(0,50),a=l.replace(/-\d+$/,"");if(!t.some(t=>t.id!==e.id&&l===t.slug))return l;let r=1;for(;t.find(e=>e.slug===S(a,"-".concat(r)));)r++;return S(a,"-".concat(r))})(n,g),[g,n]),Y=(null==f?void 0:f.title.trim())!==(null===(t=_.title.value)||void 0===t?void 0:t.trim()),q=T!==n.slug,[B,A]=(0,r.useState)(Y),[K,V]=(0,r.useState)(q);B!==Y&&A(Y),K!==q&&V(q);let $=(0,R.LP)();return(0,a.jsxs)("form",{autoComplete:"off",className:l,ref:u,onKeyDown:e=>{if(e.defaultPrevented)return},...(0,y.si)(k),children:[(0,a.jsxs)("div",{className:"flex flex-1 p-2 items-center justify-between",children:[(0,a.jsx)("div",{className:"text-sm font-semibold px-2 dark:text-neutral-100",children:"Edit Bookmark"}),(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)(x.u,{content:"Delete Bookmark",children:(0,a.jsx)("button",{role:"checkbox",tabIndex:-1,"aria-label":"delete bookmark","aria-checked":p,className:"\n                pointer-events-auto\n                w-5 h-5\n                flex items-center justify-center rounded-sm\n                disabled:opacity-50\n                hover:bg-gray-200\n                dark:hover:bg-neutral-700\n              ",onClick:async()=>{await $.mutateAsync(n.id)},children:(0,a.jsx)(w.Z,{className:"w-4 h-4\n                stroke-red-500\n                dark:stroke-teal-200\n            "})})}),(0,a.jsx)(x.u,{content:p?"Updated!":"Update bookmark to current page",children:(0,a.jsx)("button",{disabled:!b||(0,s.kM)(b)||p,role:"checkbox","aria-label":"update bookmark","aria-checked":p,className:"\n                pointer-events-auto\n                w-5 h-5\n                flex items-center justify-center rounded-sm\n                [&:not(:aria-checked)]:bg-gray-100\n                [&:not(:aria-checked)&:hover]:bg-gray-200\n                [&:not(:aria-checked)&:disabled]:opacity-50\n                group\n              ",onClick:async()=>{b&&(await v.mutateAsync({id:n.id,site_id:b}),(0,P.Me)(n.id))},children:(0,a.jsx)(d.Z,{className:" w-4 h-4 dark:text-neutral-200 group-aria-checked:stroke-yellow-400 group-aria-checked:fill-yellow-400 dark:group-aria-checked:stroke-sky-400 dark:group-aria-checked:fill-sky-400 "})})})]})]}),(0,a.jsx)("hr",{className:"botder border-t border-gray-200 dark:border-neutral-700"}),(0,a.jsx)("input",{type:"hidden",name:"id",value:n.id}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,a.jsxs)(M,{children:[(0,a.jsx)(F,{htmlFor:_.title.id,children:"Title"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(O,{className:B?"pr-6":"",onChange:e=>{A(e.currentTarget.value.trim()!==(null==f?void 0:f.title.trim()))},onBlur:e=>{var t;e.currentTarget.value=e.currentTarget.value.trim(),e.currentTarget.value!==(null===(t=n.title)||void 0===t?void 0:t.trim())&&k.valid&&z(u.current)},...(0,y.TC)(_.title,{type:"text"})}),B&&(null==f?void 0:f.title)&&b===n.site_id?(0,a.jsxs)("button",{type:"button",className:"absolute right-2 top-1/2 transform -translate-y-1/2",onClick:()=>{u.current.elements.namedItem("title").value=f.title.trim(),A(!1),k.valid&&z(u.current)},children:[(0,a.jsx)(C.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Reset title to site title"})]}):null]}),_.title.errors?(0,a.jsx)("div",{className:"text-sm text-red-600",children:_.title.errors.join(", ")}):null]}),(0,a.jsxs)(M,{children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(F,{className:"mb-1",htmlFor:_.visibility.id,children:"Publish"}),(0,a.jsx)(Z.r,{onChange:e=>{if(e.target.checked){let e=u.current.elements.namedItem("slug");e.value||(e.value=T,V(!1))}k.validate(),k.valid&&z(u.current)},...(0,y.TC)(_.visibility,{type:"checkbox",value:"public"})})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-neutral-400",children:"Makes this bookmark visible to everyone with the link configured below."}),_.visibility.errors]}),(0,a.jsxs)(M,{className:"public"===_.visibility.value||"public"===n.visibility?"":"opacity-50 pointer-events-none",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)(F,{htmlFor:_.slug.id,children:"Link"}),(0,a.jsx)("div",{className:"flex gap-4 items-center",children:"public"===n.visibility&&(0,a.jsxs)("a",{href:"".concat(window.location.origin).concat(I(n,c)),className:"text-sm flex gap-1 items-center text-blue-500",onClick:e=>{e.altKey||e.ctrlKey||e.metaKey||0!==e.button||(e.preventDefault(),navigator.clipboard.writeText("".concat(window.location.origin).concat(I(n,c))))},children:[(0,a.jsx)(D.Z,{className:"w-4 h-4"}),"Copy Link"]})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(O,{readOnly:"public"!==_.visibility.value&&"public"!==n.visibility,placeholder:T,className:K?"pr-6":"",onChange:e=>{(function(e,t){let l=e.selectionStart,a="";for(let r=0;r<e.value.length&&a.length<t.maxLength;r++)t.mask.test(e.value[r])?a+=e.value[r]:l&&r<l&&l--;e.value=a,l&&e.setSelectionRange(l,l)})(e.currentTarget,{mask:/[a-zA-Z0-9-]/,maxLength:50}),V(e.currentTarget.value!==T)},onBlur:e=>{e.currentTarget.value!==n.slug&&k.valid&&z(u.current)},...(0,y.TC)(_.slug,{type:"text"})}),K&&("public"===_.visibility.value||"public"===n.visibility)?(0,a.jsxs)("button",{type:"button",className:"absolute right-2 top-1/2 transform -translate-y-1/2",onClick:e=>{u.current.elements.namedItem("slug").value=T,V(!1),k.validate(),k.valid&&z(u.current)},children:[(0,a.jsx)(C.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Reset link"})]}):null]}),(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)(h.default,{href:E(n,c),className:"text-gray-500 [a&]:text-blue-500 text-xs flex items-center gap-0.5 truncate",children:(0,a.jsxs)("div",{className:"truncate",children:["websim.ai",I(n,c)||"public"!==n.visibility&&T]})})}),_.slug.errors?(0,a.jsx)("div",{className:"text-sm text-red-600",children:_.slug.errors.join(", ")}):null]}),(0,a.jsx)("button",{className:"sr-only",children:"Save"})]})]})},q=new Intl.DateTimeFormat("en",{year:"numeric",month:"long",day:"numeric"});function B(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function A(e,t){let l=new Date(t);return l.setDate(l.getDate()-1),e.getDate()===l.getDate()&&e.getMonth()===l.getMonth()&&e.getFullYear()===l.getFullYear()}let K=e=>{let{bookmark:t,profile:l}=e,s=(0,i.Iq)()===t.site_id,{ref:n,width:c}=(0,b.Z)(),d=(0,r.useMemo)(()=>E(t,l.username),[t,l]),o=(0,r.useContext)(v.Ec),u=(0,P.ye)()===t.id,x=(0,f.useRouter)();return(0,a.jsxs)("li",{className:"flex group",children:[(0,a.jsxs)(h.default,{href:d,className:"\n          min-w-0\n          flex-1 flex flex-col gap-1 p-2\n          bg-gray-100 rounded-lg\n          dark:bg-neutral-800\n          aria-selected:ring-2 aria-selected:ring-blue-300\n        ","aria-current":s?"page":void 0,"aria-selected":u?"true":"false",onClick:e=>{e.preventDefault(),x.push(d),g()()&&(0,P.nP)(!1)},children:[(0,a.jsx)("div",{className:"truncate text-sm",style:{paddingRight:c},children:t.title}),"public"===t.visibility?(0,a.jsx)("div",{className:"text-gray-500 dark:text-neutral-500 text-xs flex items-center gap-0.5 truncate",children:(0,a.jsxs)("div",{className:"truncate",children:["websim.ai",I(t,l.username)]})}):null]}),(0,a.jsx)("div",{className:"w-0 flex justify-end",children:(0,a.jsx)("div",{ref:n,className:"flex gap-2 p-2 pointer-events-none ".concat(l.id===(null==o?void 0:o.id)?"":"hidden"),children:(0,a.jsx)(V,{bookmark:t,profile:l})})})]})},V=e=>{let{bookmark:t,profile:l}=e,s=(0,r.useContext)(p.fP),n=(0,P.fW)()===t.id,i=(0,r.useRef)(null),d=(0,r.useRef)(null);return g()()?(0,a.jsxs)(x.Vq.Root,{open:n,onOpenChange:e=>{e?(0,P.YD)(t.id):(0,P.YD)("")},children:[(0,a.jsx)(x.Vq.Trigger,{"aria-label":"edit bookmark",className:"\n              pointer-events-auto\n              w-5 h-5\n              flex items-center justify-center rounded-md\n              bg-blue-100 text-blue-600 hover:bg-blue-200\n            ",onClick:()=>{s("open_persist")},children:(0,a.jsx)("button",{children:(0,a.jsx)(c.Z,{className:"w-4 h-4"})})}),(0,a.jsx)(x.Vq.Content,{className:"p-0 dark:bg-neutral-900",children:(0,a.jsx)(Y,{className:"flex flex-col inset-0",bookmark:t,username:l.username,formElementRef:d,formRef:i},t.id)})]}):(0,a.jsxs)(u.fC,{modal:!0,open:n,onOpenChange:e=>{e?(0,P.YD)(t.id):(0,P.YD)("")},children:[(0,a.jsx)(u.xz,{asChild:!0,"aria-label":"edit bookmark",className:"\n            opacity-0\n            group-hover:opacity-100\n            pointer-events-auto\n            w-5 h-5\n            flex items-center justify-center rounded-md\n            bg-blue-100 text-blue-600 hover:bg-blue-200\n          ",onClick:()=>{s("open_persist")},children:(0,a.jsx)("button",{children:(0,a.jsx)(c.Z,{className:"w-4 h-4"})})}),(0,a.jsx)(u.h_,{children:(0,a.jsxs)(u.VY,{className:"w-96",side:"right",sideOffset:30,onPointerDownOutside:e=>{let t=i.current;t&&t.dirty&&(t.validate(),t.valid&&z(d.current))},children:[(0,a.jsx)(u.Eh,{className:"fill-gray-300 dark:fill-neutral-900"}),(0,a.jsx)(Y,{className:" flex flex-col rounded-lg bg-gray-100 dark:bg-neutral-900 ring-1 ring-gray-200/50 dark:ring-neutral-50/20 shadow-lg bg-clip-padding ",bookmark:t,username:l.username,formElementRef:d,formRef:i},t.id)]})})]})},$=e=>{var t;let{bookmarks:l,profile:c,currentBookmarkId:u}=e,m=(0,r.useContext)(v.Ec),g=(0,i.Wo)(),[h]=(0,r.useState)(()=>new Date),f=l.reduce((e,t)=>{let l;let a=new Date(t.updated_at);return e[l=B(a,h)?"Today":A(a,h)?"Yesterday":a.getDate()===h.getDate()-2?"2 days ago":a.getDate()===h.getDate()-3?"3 days ago":q.format(a)]||(e[l]=[]),e[l].push(t),e},{}),{mutateAsync:b}=(0,R.qM)(),p=(0,r.useContext)(k.Oq);return(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 px-4 pb-2 absolute inset-0 overflow-y-auto ",children:[0===l.length&&(null==m?void 0:m.id)!==c.id&&(0,a.jsxs)("div",{className:"pt-12 text-center text-gray-500 text-sm",children:["@",c.username," has no public bookmarks."]}),0===l.length&&(null==m?void 0:m.id)===c.id&&(null===(t=p.userFilter)||void 0===t?void 0:t.username)===c.username&&(0,a.jsxs)("div",{className:" pt-12 text-center text-gray-500 text-sm dark:text-neutral-400 ",children:["No bookmarks yet! Click the"," ",(0,a.jsx)(d.Z,{className:"w-4 h-4 inline","aria-label":"add bookmark"})," ","button to save a bookmark"]}),Object.entries(f).map(e=>{let[t,l]=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-neutral-400 sticky top-0 px-2 -mx-2 bg-white dark:bg-neutral-900",children:t}),(0,a.jsx)("ul",{className:"flex flex-col gap-2",children:l.map(e=>(0,a.jsx)(K,{bookmark:e,profile:c},e.id))})]},t)})]}),(null==m?void 0:m.id)===c.id&&(0,a.jsx)("div",{className:"absolute top-0 right-2",children:(0,a.jsx)(x.u,{content:"Add Bookmark",children:(0,a.jsx)("button",{disabled:!(null==g?void 0:g.id)||!(null==g?void 0:g.title)||(0,s.kM)(null==g?void 0:g.id),className:"w-6 h-6 flex items-center justify-center rounded-full bg-blue-500 hover:bg-blue-400 text-white","aria-label":"add bookmark",onClick:async()=>{if((null==g?void 0:g.id)&&(null==g?void 0:g.title)){let e=(0,n.A)();await b({site_id:null==g?void 0:g.id,title:null==g?void 0:g.title,id:e})}},children:(0,a.jsx)(o.Z,{className:"w-4 h-4"})})})})]})};var Q=l(17713),W=l(64816),U=l(82366);let H=e=>{var t;let{currentBookmarkId:l,onSetCurrentBookmarkId:s}=e,n=(0,r.useContext)(k.Ev);(0,r.useContext)(v.Ec);let{data:i}=(0,R.S7)();(null!=i?i:[]).find(e=>e.id===l);let c=(0,r.useContext)(k.Q),d=(0,r.useContext)(k.sY),o=d.trim(),u=(0,r.useContext)(k.Oq),x=(null!==(t=u.textFilter)&&void 0!==t?t:"").trim(),m=(0,r.useMemo)(()=>(null!=i?i:[]).filter(e=>(0,U.R)(u,n,e)),[i,u,n]);return(0,a.jsx)("div",{className:"flex-1 flex flex-col gap-4 bg-white dark:bg-neutral-900 pt-4",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex flex-col px-4",children:(0,a.jsxs)("div",{className:"relative flex",children:[(0,a.jsx)(Q.Z,{className:"absolute top-3 left-3 w-5 h-5 text-gray-500 dark:text-neutral-500"}),(0,a.jsx)("input",{type:"text",placeholder:"Search bookmarks","aria-label":"search bookmarks",className:" flex-1 h-11 pr-10 pl-10 text-sm rounded-lg border border-gray-200 dark:border-neutral-700 bg-gray-100 dark:bg-neutral-800 text-gray-800 dark:text-white ",value:d,onChange:e=>c(e.target.value),onBlur:()=>{c(o)},onKeyDown:e=>{e.defaultPrevented||"Escape"!==e.key||(e.preventDefault(),c(""))}}),""===x?null:(0,a.jsxs)("button",{"aria-label":"clear search",onClick:()=>c(""),className:"absolute top-2.5 right-2.5 w-6 h-6 flex items-center justify-center hover:bg-gray-100 rounded-full",children:[(0,a.jsx)(W.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Clear search"})]})]})}),n&&(0,a.jsx)($,{bookmarks:m,profile:n,currentBookmarkId:l})]})})};var G=l(98448);function J(){let[e,t]=(0,r.useState)(""),{data:l,error:s}=(0,G.k)();return s?(0,a.jsx)("div",{children:"Error retrieving history"}):(0,a.jsxs)("div",{className:"flex-1 flex flex-col gap-4 bg-white dark:bg-neutral-900",children:[(0,a.jsx)(X,{filterText:e,setFilterText:t}),(0,a.jsx)(ee,{data:null!=l?l:[],filterText:e})]})}function X(e){let{filterText:t,setFilterText:l}=e;return(0,a.jsx)("div",{className:"flex flex-col px-4 pt-4",children:(0,a.jsxs)("div",{className:"relative flex",children:[(0,a.jsx)(Q.Z,{className:"absolute top-3 left-3 w-5 h-5 text-gray-500 dark:text-neutral-500"}),(0,a.jsx)("input",{type:"text",placeholder:"Search history","aria-label":"search history",className:" flex-1 h-11 pr-10 pl-10 text-sm rounded-lg border border-gray-200 dark:border-neutral-700 bg-gray-100 dark:bg-neutral-800 text-gray-800 dark:text-white ",value:t,onChange:e=>l(e.target.value),onKeyDown:e=>{e.defaultPrevented||"Escape"!==e.key||(e.preventDefault(),l(""))}}),""===t?null:(0,a.jsxs)("button",{"aria-label":"clear search",onClick:()=>l(""),className:"absolute top-2.5 right-2.5 w-6 h-6 flex items-center justify-center hover:bg-gray-100 rounded-full",children:[(0,a.jsx)(W.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Clear search"})]})]})})}function ee(e){let{data:t,filterText:l}=e,r=(null!=t?t:[]).filter(e=>{var t,a;return(null===(t=e.url)||void 0===t?void 0:t.toLowerCase().includes(l.toLowerCase()))||(null===(a=e.title)||void 0===a?void 0:a.toLowerCase().includes(l.toLowerCase()))}),s=new Date,n=r.reduce((e,t)=>{let l;let a=new Date(t.created_at);return e[l=B(a,s)?"Today":A(a,s)?"Yesterday":a.getDate()===s.getDate()-2?"2 days ago":a.getDate()===s.getDate()-3?"3 days ago":q.format(a)]||(e[l]=[]),e[l].push(t),e},{});return(0,a.jsx)("div",{className:"relative flex-1",children:(0,a.jsx)("div",{className:"absolute inset-0 overflow-y-auto flex flex-col gap-2 px-4 pb-2",children:Object.entries(n).map(e=>{let[t,l]=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-neutral-400 sticky top-0 px-2 -mx-2 pb-1 bg-white dark:bg-neutral-900",children:t}),l.map(e=>(0,a.jsx)(et,{site:e},e.id))]},t)})})})}function et(e){let{site:t}=e,l=(0,T.l)(e=>{e.pathname="/c/".concat(t.id)}),r="eval"!==t.method?t.command:t.url,s=(0,f.useRouter)();return(0,a.jsx)("li",{className:"flex group",children:(0,a.jsxs)(h.default,{href:l,className:"\n          min-w-0\n          flex-1 flex flex-col gap-1 p-2\n          bg-gray-100 rounded-lg\n          dark:bg-neutral-800\n          group-hover:opacity-70\n          aria-selected:ring-2 aria-selected:ring-blue-300\n          [span&]:opacity-50 [span&]:pointer-events-none\n        ",onClick:e=>{e.preventDefault(),s.push(l),g()()&&(0,P.nP)(!1)},children:[(0,a.jsx)("div",{className:"flex flex-row gap-4 text-xs truncate",children:t.title}),r!==t.url&&(0,a.jsx)("div",{className:"flex flex-row gap-4 text-xs truncate",children:r}),(0,a.jsx)("div",{className:"flex flex-row gap-4 text-xs text-gray-500 dark:text-neutral-500 whitespace-pre-line break-all",children:t.url})]})},t.id)}var el=l(56164),ea=l(34714),er=l(59406),es=l(65607),en=l(23224),ei=l(84971);let ec=e=>{let{pinned:t,onPin:l,renderBookmarks:s,renderLikes:n,renderHistory:i,onClose:c,fullScreen:o}=e,u=(0,P.Tk)(),x=(0,r.useContext)(p.fP);return(0,a.jsxs)("div",{className:"\n      shadow-xl bg-clip-padding\n      @container flex-1 flex flex-col\n      bg-gray-100\n      dark:bg-neutral-700\n      ring-1 ring-gray-200/50 dark:ring-neutral-50/20\n      z-10\n      ".concat(o?"":"rounded-lg","\n      overflow-y-auto\n    "),onClick:()=>{g()()||x("open")},children:[(0,a.jsxs)("div",{className:"flex space-between items-end",children:[(0,a.jsxs)("div",{className:"flex flex-1 items-center flex-row gap-0 h-12",children:[(0,a.jsx)(el.T,{className:"text-xl p-4 justify-center"}),(0,a.jsx)("div",{className:"flex-0 flex h-full items-center justify-center",children:!g()()&&(0,a.jsx)("button",{onClick:()=>{t?c():l()},className:" flex-0 hover:opacity-80 rounded-lg items-center justify-center px-4 py-2 text-gray-500 bg-gray-200 mt-[3px] dark:bg-neutral-500 dark:text-neutral-100 ",children:t?(0,a.jsx)(ea.Z,{className:"w-4 h-4"}):(0,a.jsx)(er.Z,{className:"w-4 h-4"})})})]}),(0,a.jsxs)("div",{className:"flex-0 flex flex-row gap-2 pr-2",children:[(0,a.jsx)("button",{className:"".concat("bookmarks"===u?"bg-white dark:bg-neutral-900":"bg-gray-200 dark:bg-neutral-800"," flex-0 rounded-lg rounded-b-none px-3 pt-2 pb-1 hover:opacity-80"),onClick:()=>(0,P.$5)("bookmarks"),children:(0,a.jsx)(d.Z,{className:"w-5 h-5 mb-0"})}),(0,a.jsx)("button",{className:"".concat("likes"===u?"bg-white dark:bg-neutral-900":"bg-gray-200 dark:bg-neutral-800"," flex-0 rounded-lg rounded-b-none px-3 pt-2 pb-1 hover:opacity-80"),onClick:()=>(0,P.$5)("likes"),children:(0,a.jsx)(es.Z,{className:"w-5 h-5 mb-0"})}),(0,a.jsx)("button",{className:"".concat("history"===u?"bg-white dark:bg-neutral-900":"bg-gray-200 dark:bg-neutral-800"," flex-0 rounded-lg rounded-b-none px-3 pt-2 pb-1 hover:opacity-80"),onClick:()=>(0,P.$5)("history"),children:(0,a.jsx)(en.Z,{className:"w-5 h-5 mb-0"})}),(0,a.jsx)("div",{className:"flex-0 flex items-center justify-center pt-1",children:(0,a.jsx)(ei.zI,{})})]})]}),"bookmarks"===u?s():"likes"===u?n():i()]})},ed=e=>{let{like:t}=e,l=(0,i.Iq)(),r=l===t.site_id,{ref:s,width:n}=(0,b.Z)(),c=l===t.site_id,d=(0,f.useRouter)(),o=(0,T.l)(e=>{e.pathname="/c/".concat(t.site_id)});return(0,a.jsx)("li",{className:"flex group",children:(0,a.jsx)(h.default,{href:o,className:"\n          min-w-0\n          flex-1 flex flex-col gap-1 p-2\n          bg-gray-100 rounded-lg\n          dark:bg-neutral-800\n          aria-selected:ring-2 aria-selected:ring-blue-300\n        ","aria-current":r?"page":void 0,"aria-selected":c?"true":"false",onClick:e=>{e.preventDefault(),d.push(o),g()()&&(0,P.nP)(!1)},children:(0,a.jsx)("div",{className:"truncate text-sm",style:{paddingRight:n},children:t.title||t.url})})},t.id)},eo=e=>{let{likes:t}=e,[l]=(0,r.useState)(()=>new Date),s=t.reduce((e,t)=>{let a;let r=new Date(t.created_at);return e[a=B(r,l)?"Today":A(r,l)?"Yesterday":r.getDate()===l.getDate()-2?"2 days ago":r.getDate()===l.getDate()-3?"3 days ago":q.format(r)]||(e[a]=[]),e[a].push(t),e},{});return(0,a.jsx)("div",{className:"relative flex-1",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2 px-4 pb-2 absolute inset-0 overflow-y-auto ",children:[0===t.length&&(0,a.jsxs)("div",{className:" pt-12 text-center text-gray-500 text-sm dark:text-neutral-400 ",children:["No likes yet! Click the"," ",(0,a.jsx)(es.Z,{className:"w-4 h-4 inline","aria-label":"add like"})," ","button to save a like"]}),Object.entries(s).map(e=>{let[t,l]=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-neutral-400 sticky top-0 px-2 -mx-2 bg-white dark:bg-neutral-900",children:t}),(0,a.jsx)("ul",{className:"flex flex-col gap-2",children:l.map(e=>(0,a.jsx)(ed,{like:e},e.id))})]},t)})]})})};var eu=l(75005),ex=l(77362);let em=()=>{let{data:e}=function(){var e;let t=(0,eu.$)(),l=(0,r.useContext)(v.Ec);return(0,ex.useQuery)({queryKey:[null!==(e=null==l?void 0:l.id)&&void 0!==e?e:"","likes"],queryFn:async()=>{var e;let a=await t.from("likes").select("id,created_at,user_id,site_id,...sites(title,url)").order("created_at",{ascending:!1}).eq("user_id",null!==(e=null==l?void 0:l.id)&&void 0!==e?e:"");if(a.error)throw a.error;return a.data},enabled:!!l})}(),[t,l]=(0,r.useState)(""),s=(0,r.useMemo)(()=>null==e?void 0:e.filter(e=>{var l,a;return(null===(l=e.title)||void 0===l?void 0:l.toLowerCase().includes(t.toLowerCase()))||(null===(a=e.url)||void 0===a?void 0:a.toLowerCase().includes(t.toLowerCase()))}),[e,t]);return(0,a.jsx)("div",{className:"flex-1 flex flex-col gap-4 bg-white dark:bg-neutral-900 pt-4",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex flex-col px-4",children:(0,a.jsxs)("div",{className:"relative flex",children:[(0,a.jsx)(Q.Z,{className:"absolute top-3 left-3 w-5 h-5 text-gray-500 dark:text-neutral-500"}),(0,a.jsx)("input",{type:"text",placeholder:"Search likes","aria-label":"search likes",className:" flex-1 h-11 pr-10 pl-10 text-sm rounded-lg border border-gray-200 dark:border-neutral-700 bg-gray-100 dark:bg-neutral-800 text-gray-800 dark:text-white ",value:t,onChange:e=>l(e.target.value),onBlur:()=>{l(t.trim())},onKeyDown:e=>{e.defaultPrevented||"Escape"!==e.key||(e.preventDefault(),l(""))}}),""===t?null:(0,a.jsxs)("button",{"aria-label":"clear search",onClick:()=>l(""),className:"absolute top-2.5 right-2.5 w-6 h-6 flex items-center justify-center hover:bg-gray-100 rounded-full",children:[(0,a.jsx)(W.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Clear search"})]})]})}),(0,a.jsx)(eo,{likes:null!=s?s:[]})]})})};var eg=l(73164);function eh(){let e=(0,eg.O9)(),t=(0,r.useContext)(v.Ec),l=(0,P.ye)(),s=(0,P.Tl)(),n=(0,r.useContext)(p.fP);return t?(0,a.jsx)(ec,{fullScreen:e,pinned:s,onPin:()=>{(0,P.nP)(!0)},onClose:()=>{n("exited"),(0,P.nP)(!1)},renderBookmarks:()=>(0,a.jsx)(H,{currentBookmarkId:l,onSetCurrentBookmarkId:e=>{}},"sidebar"),renderLikes:()=>(0,a.jsx)(em,{}),renderHistory:()=>(0,a.jsx)(J,{})}):null}}},function(e){e.O(0,[649,71,118,380,341,610,421,115,362,744],function(){return e(e.s=44843)}),_N_E=e.O()}]);